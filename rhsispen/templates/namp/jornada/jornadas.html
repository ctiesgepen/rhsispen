{% extends "base.html" %}
{% load i18n static %}

{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static 'css/gerarjornadasetor.css' %}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
{% endblock %}

{% block extrahead %}{{ block.super }}
<script src="{% url 'admin:jsi18n' %}"></script>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>

<script type="text/javascript">
  $(function () {
    // inspect html to check id of category select dropdown.
    $(document).on("focus", "select#id_equipe_plantao24h", function () {
      $.getJSON("/getEquipes24h/", { id_setor: "{{setor.id_setor}}" }, function (j) {
        var options = '<option value="">Selecione uma opção</option>';
        for (var i = 0; i < j.length; i++) {
          options +=
          '<option value="' + j[i].id_equipe + '">' + j[i].nome + "</option>";
        }
        // inspect html to check id of subcategory select dropdown.
        $("select#id_equipe_plantao24h").html(options);
      });
    });
  });
</script>

<script>
  $(document).ready(function() {
      $('.datepicker').datepicker({
        dateFormat: 'yy-mm-dd' ,
        minDate: 0,
      });
      $('.datepicker').attr("autocomplete", "off");
  });
</script>

<script type="text/javascript">
  $(function () {
    $(document).on("focus", "select#id_equipe_plantao48h", function () {
      $.getJSON("/getEquipes48h/", { id_setor: "{{setor.id_setor}}" }, function (j) {
        var options = '<option value="">Selecione uma opção</option>';
        for (var i = 0; i < j.length; i++) {
          options +=
          '<option value="' + j[i].id_equipe + '">' + j[i].nome + "</option>";
        }
        $("select#id_equipe_plantao48h").html(options);
      });
    });
  });
</script>

{% endblock %}

{% block breadcrumbs %}
  <div class="breadcrumbs">
  <a href="{% url 'namp:home' %}">{% translate 'Home' %}</a>
  &rsaquo; {% translate 'Jornadas' %}
  </div>
{% endblock %}

{% block content %}
<div class="content">    
    <h4 class="text-center">Gerar Escala Regular - Mês 05/2021</h4>
    <h5 class="text-center">{{ setor.nome }}</h5>
</div>

<div class="content">
  <div class="boxJorExp">
    <h6>Equipes em Jornada de Expediente</h6>
    <table class="table table-bordered text-center table-overflow">
      <thead>
        <tr>
          <th scope="col">EQUIPE: </th>
          <th scope="col">QTDE DE SERVIDORES:</th>
          <th scope="col">TIPO DE JORNADA:</th>
        </tr>
      </thead>
      <tbody>
        {% for equipe in equipes %}
        <tr>
          {% if equipe.categoria == "Expediente" %}
            <td><a href="#">{{equipe.nome}}</a></td>
            <td>{{equipe.get_servidores}}</td>
            <td>{{ equipe.fk_tipo_jornada.tipificacao }}</td>
          {% endif %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <br><br>

  <div class="boxJorExp">
    <h6>Equipes em Jornada de Plantão</h6>
    <table class="table table-bordered text-center table-overflow">
      <thead>
        <tr>
          <th scope="col">EQUIPE: </th>
          <th scope="col">QTDE DE SERVIDORES:</th>
          <th scope="col">TIPO DE JORNADA:</th>
        </tr>
      </thead>
      <tbody>
        {% for equipe in equipes %}
        <tr>
          {% if equipe.categoria == "Plantão" %}
            <td><a href="#">{{equipe.nome}}</a></td>
            <td>{{equipe.get_servidores}}</td>
            <td>{{equipe.fk_tipo_jornada.tipificacao}}</td>
          {% endif %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <br><br>
  
  <div class="boxJorExp">
    <h6>Definir escala regular</h6>
    <br>
    <div class="formPlantao">
      <h6>Plantão - 24h</h6>
      <div class="row g-3 align-items-center">
        <div class="col-md-12 row">
            <form method="POST">

              <div class="col-md-4">
                <label for="inputPassword6" class="col-form-label">Selecione a Equipe que iniciará o mês:</label> 
              </div>
              <div class="col-md-3">
                <select class="form-select col-md-6" aria-label="Default select example">
                  <option value="{{ form.equipes.nome }}"disabled selected>Selecione uma opção</option>
                </select>
              </div>
    
              <div class="col-md-2">
                <label for="data" class="col-form-label">Selecione a data:</label> 
              </div>
              <div class="col-md-3">
                  <input type="date" class="form-control" id="data">
              </div>
    
              <div class="col-md-12">
                <span class="form-text text-right">
                  Equipe que encerrará o mês 04/2021: Plantão Delta.
                </span>
              </div>

            </form>

        </div>
      </div>
    </div>
    <br>

    <div class="formPlantao">
      <h6>Plantão - 48h</h6>
      <div class="row g-3 align-items-center">
        <div class="col-md-12 row">
          <div class="col-md-4">
            <label for="inputPassword6" class="col-form-label">Selecione a Equipe que iniciará o mês:</label> 
          </div>
          <div class="col-md-3">
            <select class="form-select col-md-6" aria-label="Default select example">
              <option disabled selected>Selecione uma opção</option>
              <option value="1">Plantão Alpha</option>
              <option value="2">Plantão Beta</option>
              <option value="3">Plantão Charlie</option>
              <option value="3">Plantão Delta</option>
            </select>
          </div>

          <div class="col-md-2">
            <label for="data" class="col-form-label">Selecione a data:</label> 
          </div>
          <div class="col-md-3">
              <input type="date" class="form-control" id="data">
          </div>

          <div class="col-md-12">
            <span class="form-text text-right">
              Equipe que encerrará o mês 04/2021: Plantão Delta.
            </span>
          </div>

          <br><br>

          <div class="submit-row" align="right">
            <input type="submit" value="{% translate 'Gerar Escalas' %}">
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

